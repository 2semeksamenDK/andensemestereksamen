---
import type { GetStaticPaths } from "astro";
import PageLayout from "../../layout/PageLayout.astro";

export async function getStaticPaths() {
  const url = "https://zcoyexxpigipyagyxcfr.supabase.co/rest/v1/tilbud";
  const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpjb3lleHhwaWdpcHlhZ3l4Y2ZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5MzcwMDUsImV4cCI6MjA4MTUxMzAwNX0.E7F0l3S6iLF5y0SDOwx6ZNnTdPxAG4DBZDIWIlbd2Dk";

  const options = {
    headers: {
      apikey: key,
    },
  };

  const supaRequest = await fetch(url, options);
  const supaData = await supaRequest.json();

  console.log("supaData", supaData);

  return supaData.map((data) => {
    return {
      params: { slug: data.slug },
      props: { data },
    };
  });
}

const { data } = Astro.props as { data: tilbud };
---


<PageLayout >
<section class="grid">
  <img class="img1" src={data.img1} alt={data.title} />

  <div class="block block--intro">
    <div>
      <h2 class="title-main">{data.title}</h2>
    </div>
    <div>
      <p>{data.text1}</p>
      <p>{data.text2}</p>
    </div>
  </div>

  <div>
    <h2>{data.subtitle}</h2>
    <p>{data.text3}</p>
    <p>{data.text4}</p>
  </div>

  <img src={data.img2} alt="" />
</section>
</PageLayout>


<style>

img {
    border-radius: 20px;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    width: 100%;
    height: 100%;
  }

  .h1 {
    text-align: left;
  }

  h2 {
  text-align: left;
  font-size: 2rem;

}

p {
  margin-top: 1rem;
  text-align: left;
}


.grid {
  display: grid;
  gap: 1.5rem;
}

.block--intro {
  display: contents;
}

.title-main {
  grid-row: 1;
}

.img1 { 
grid-row: 2; 
}

@media (min-width: 800px) {
 

.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
}

.block--intro {
    display: block;
  }

.title-main {
    grid-row: auto;
  }

.img1 { 
    grid-row: auto; 
  }

}
</style>
